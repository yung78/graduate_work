# Описание backend:

- [Общая информация](#общая-информация)  

- [Развертывание сервера](#развёртывание-сервера-на-платформе-regru)


 ## Общая информация

При разработке серверной части приложения принял решениене не переиспользовать готовые решения Django, а составить схему БД, проверку аутентификации и авторизации самостоятельно.

Схема хранения информации в базе данных проекта:  
![бд](./readme_res/схема-бд.png)  


Хранение файлов и аватаров организовано в соответствующих директориях с распределением по папкам с id пользователя.
Удаление файлов с физического диска производит библиотека django-cleanup.

При прохождении аутентификации(при входе) генерируется токен сессии который сохраняется в бд и передается в теле ответа клиенту. На клиенте браузер получив токен, сохраняет его в localForage, после чего токен передается в заголовках каждого  запроса. Получив запрос сервер перед каждым действием проверяет существование данного токена в БД, чтобы убедиться в прохождении аутентификации клиентом.  
Дополнительно периодически производится проверка аккаунта на "флаг" наличия прав администратора.

При обратной аутентификации(при выходе) токен удаляется из БД и из браузера на клиенте.  

При необходимости можно реализовать функцию проверки даты/времени создания токена и удалять его из бд после прохождения какого-то срока.

 ## Развёртывание сервера на платформе reg.ru

...


